name: "Integration Deploy Lib"
description: "Deploy Lib using Maven"

runs:
  using: "composite"
  steps:
      - name: Checkout branch
        uses: actions/checkout@v3

      - name: Set up Java 11
        uses: actions/setup-java@v3
        with:
          java-version: '11'
          distribution: 'temurin'
          server-id: github

      - name: Cache dependencies
        uses: actions/cache@v3
        with:
          path: ~/.m2
          key: v1-dependencies-{{ checksum "pom.xml" }}
          restore-keys: v1-dependencies-

      - name: Publish to GitHub Maven Packages
        shell: bash
        run: mvn deploy -s $GITHUB_WORKSPACE/.github/settings.xml

